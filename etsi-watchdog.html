<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>etsi-watchdog Documentation</title>
  <link rel="stylesheet" href="style.css">
</head>
<body class="documentation">

  <!-- navbar -->
  <nav class="navbar">
    <h1 class="logo">etsi Documentation</h1>
    <ul class="nav-links">
      <li><a href="etsi-watchdog.html" class="active">etsi-watchdog</a></li>
      <li><a href="etsi-failprint.html">etsi-failprint</a></li>
      <li><a href="etsi-etna.html">etsi-etna</a></li>
    </ul>
  </nav>

  <div class="shine-container">
    <a href="https://github.com/etsi-ai/etsi-watchdog" target="_blank" class="shine-text">
      Visit GitHub to Contribute
    </a>
  </div>



  <main class="content">
    <h2>etsi-watchdog</h2>
    <p><strong>etsi-watchdog</strong> is a lightweight Python library for detecting tabular data drift using statistical tests like PSI. It's modular, production-ready, and ideal for ML validation pipelines and scheduled monitoring tasks.</p>
    <hr>

    <!-- install the package -->
    <h3>Installation</h3>
    <div class="code-block">
      <button class="copy-btn" onclick="copyCode(this)">Copy Code</button>
      <pre><code>pip install etsi-watchdog</code></pre>
    </div>

    <h3>Core Components</h3>
    <table>
      <thead>
        <tr>
          <th>Class</th>
          <th>Purpose</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>DriftCheck</code></td>
          <td>Compare reference vs. current dataset using PSI or other drift algorithms.</td>
        </tr>
        <tr>
          <td><code>Monitor</code></td>
          <td>Rolling monitoring system to detect drift over time with logging support.</td>
        </tr>
        <tr>
          <td><code>DriftComparator</code></td>
          <td>Compares drift results between two different data/model versions.</td>
        </tr>
      </tbody>
    </table>

    <h3>DriftCheck API</h3>
    <table>
      <thead>
        <tr>
          <th>Method</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>check.run(current_df, features)</code></td>
          <td>Runs drift detection on a list of features from <code>current_df</code> vs the reference.</td>
        </tr>
      </tbody>
    </table>

    <h3>Monitor API</h3>
    <table>
      <thead>
        <tr>
          <th>Method</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>monitor.enable_logging(path)</code></td>
          <td>Enable CSV-based logging of drift results to the specified path.</td>
        </tr>
        <tr>
          <td><code>monitor.watch_rolling(df, window, freq, features)</code></td>
          <td>Monitors drift over a time-indexed DataFrame. Aggregates and checks drift for each period.</td>
        </tr>
      </tbody>
    </table>

    <h3>DriftResult API</h3>
    <table>
      <thead>
        <tr>
          <th>Attribute / Method</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>.is_drifted</code></td>
          <td>Returns <code>True</code> if the score exceeds threshold.</td>
        </tr>
        <tr>
          <td><code>.summary()</code></td>
          <td>Prints a short summary like “Drift Detected” with score and method name.</td>
        </tr>
        <tr>
          <td><code>.plot()</code></td>
          <td>Renders a histogram plot of PSI or other scores (requires matplotlib).</td>
        </tr>
        <tr>
          <td><code>.to_json(path)</code></td>
          <td>Saves result as a structured JSON file. If no path is passed, returns a dict.</td>
        </tr>
      </tbody>
    </table>
    
    <!-- code samples -->
    <h3>Example: One-time Check</h3>
    <div class="code-block">
      <button class="copy-btn" onclick="copyCode(this)">Copy Code</button>
      <pre><code id="example-one-time"></code></pre>
    </div>

    <h3>Example: Scheduled Monitoring</h3>
    <div class="code-block">
      <button class="copy-btn" onclick="copyCode(this)">Copy Code</button>
      <pre><code id="example-monitor"></code></pre>
    </div>

    <h3>Example: Version Comparison</h3>
    <div class="code-block">
      <button class="copy-btn" onclick="copyCode(this)">Copy Code</button>
      <pre><code id="example-compare"></code></pre>
    </div>

    <h3>Resources</h3>
    <div class="resource-links">
    <a class="resource-link" href="https://pypi.org/project/etsi-watchdog/" target="_blank">PyPI Release</a>
    <a class="resource-link" href="" target="_blank">Google Colab Demo</a>
    <a class="resource-link" href="https://github.com/etsi-ai/etsi-watchdog" target="_blank">GitHub Repository</a>
    </div>

  </main>
  <script>
    function copyCode(button) {
      const code = button.nextElementSibling.innerText;
      navigator.clipboard.writeText(code).then(() => {
        button.textContent = "✅ Copied!";
        setTimeout(() => button.textContent = "Copy Code", 1500);
      }).catch(err => {
        console.error("Failed to copy code: ", err);
      });
    }


    fetch("website_code_samples/one_time_check.py")
    .then(response => response.text())
    .then(data => {
      document.getElementById("example-one-time").textContent = data;
    });

    fetch("website_code_samples/scheduled_monitor.py")
    .then(response => response.text())
    .then(data => {
      document.getElementById("example-monitor").textContent = data;
    });

    fetch("website_code_samples/version_comparison.py")
    .then(response => response.text())
    .then(data => {
      document.getElementById("example-compare").textContent = data;
    });
    </script>

</body>
</html>
